<script type="text/javascript">
  // add the "Now" and "Start/End of Day" buttons to the ClockIn and ClockOut
  // input boxes within the contained form#dailydayform > fieldset

  var selDailyFrmFldst = "div#dailyClockInOutDialogTemplate form#dailydayform fieldset";

  var dictTimeEntryRows  = {
    "in":  "~[text:psx.jshtml.admin_students.attendance_clockinout.clock_in]",   // Clock In
    "out": "~[text:psx.jshtml.admin_students.attendance_clockinout.clock_out]"   // Clock Out
  };
  
  // using a cloneable template as changing the 'type' attribute of a button causes issues on IE
  var btnButtonTemplate = document.createRange().createContextualFragment('<button type="button"></button>').firstElementChild;
  btnButtonTemplate.setAttribute('class','attqckbttns');
  $j(btnButtonTemplate).css('width','13ex');   // TODO: Set button width based on the max length of their labels
  
  var btnTimeIn_Current = btnButtonTemplate.cloneNode();
  $j(btnTimeIn_Current).css('margin-left','1em');
  btnTimeIn_Current.innerText = "Current Time";
  // btnTimeIn_Current.onclick = function() {setInputToTime("in", "now")};
  
  var btnTimeOut_Current = btnButtonTemplate.cloneNode();
  $j(btnTimeOut_Current).css('margin-left','1em');
  btnTimeOut_Current.innerText = "Current Time";
  // btnTimeOut_Current.onclick = function() {setInputToTime("out", "now")};
  
  var btnTimeIn_DayStart = btnButtonTemplate.cloneNode();
  btnTimeIn_DayStart.innerText = "Start of Day";
  // btnTimeIn_DayStart.onclick = function() {setInputToTime("in", "daystart")};
  
  var btnTimeIn_DayEnd = btnButtonTemplate.cloneNode();
  btnTimeIn_DayEnd.innerText = "End of Day";
  // btnTimeIn_DayEnd.onclick = function() {setInputToTime("out", "dayend")};
  
  var fragQckBtnsRow_In = document.createDocumentFragment();
  fragQckBtnsRow_In.appendChild(document.createElement("span"));
  fragQckBtnsRow_In.firstElementChild.setAttribute('class','qckbttns-row');
  //fragQckBtnsRow_In.firstElementChild.setAttribute('style','font-size:smaller;');
  fragQckBtnsRow_In.firstElementChild.appendChild(btnTimeIn_Current);
  fragQckBtnsRow_In.firstElementChild.appendChild(btnTimeIn_DayStart);
  
  var fragQckBtnsRow_Out = document.createDocumentFragment();
  fragQckBtnsRow_Out.appendChild(document.createElement("span"));
  fragQckBtnsRow_Out.firstElementChild.setAttribute('class','qckbttns-row');
  fragQckBtnsRow_Out.firstElementChild.appendChild(btnTimeOut_Current);
  fragQckBtnsRow_Out.firstElementChild.appendChild(btnTimeIn_DayEnd);

// By the time the clockInOutButton is rendered to the page, the dailyClockInOutDialogTemplate
// has been fully loaded (hidden) in the drawerPane.  Set a delegated event handler for the
// button to add the timeEntry buttons to the template.
// TODO:  Check that the attTimeQuickButtons don't exist before adding them (to avoid duplicates)

$j("body").on( "click", "button[name='clockInOutButton']", function( event ) {
  alert("event triggered");
  // reduce with of labels to 27% (stock is 35%) to make room for buttons
  $j(`${selDailyFrmFldst} label`).css('width','27%');

  // remove the example text from right of the input boxes
  $j(`${selDailyFrmFldst} div:has(label:contains('Clock In')) span:has(input.timeEntry)`).contents().filter(function(){return this.nodeType === 3;}).remove();
  $j(`${selDailyFrmFldst} div:has(label:contains('Clock Out')) span:has(input.timeEntry)`).contents().filter(function(){return this.nodeType === 3;}).remove();
  $j(`${selDailyFrmFldst} div:has(label:contains('Clock In')) span:has(input.timeEntry)`).contents().last().after(fragQckBtnsRow_In);
  $j(`${selDailyFrmFldst} div:has(label:contains('Clock Out')) span:has(input.timeEntry)`).contents().last().after(fragQckBtnsRow_Out);
});

</script>